<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Speech synthesiser</title>
<script type="text/javascript">
    function requestOrientationPermission(){
        DeviceOrientationEvent.requestPermission()
        .then(response => {
            if (response == 'granted') {
                window.addEventListener('deviceorientation', (e) => {
                window.addEventListener('devicemotion', function(event) {
                  var currentTime = new Date().getTime();
                  if (lastTimestamp === undefined) {
                    lastTimestamp = new Date().getTime();
                    return; //ignore first call, we need a reference time
                  }
                  //  m/sÂ² / 1000 * (miliseconds - miliseconds)/1000 /3600 => km/h (if I didn't made a mistake)
                  speedX += event.acceleration.x / 1000 * ((currentTime - lastTimestamp)/1000)/3600;
                  //... same for Y and Z
                  lastTimestamp = currentTime;
                }, false);
                })
            }
        })
        .catch(console.error)
    }
</script>
  </head>

  <body>
    <p> Your speed is: </p>
    <p id="sp"></p>
     <button onclick='requestOrientationPermission();'>Request orientation permission</button> 
  </body>
</html>
